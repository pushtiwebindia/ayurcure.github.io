(function(c){var d=function(v,a){var x=c.extend({},c.fn.nivoSlider.defaults,a);var s={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};var A=c(v);A.data("nivo:vars",s);A.css("position","relative");A.addClass("nivoSlider");var z=A.children();z.each(function(){var f=c(this);var g="";if(!f.is("img")){if(f.is("a")){f.addClass("nivo-imageLink");g=f}f=f.find("img:first")}var h=f.width();if(h==0){h=f.attr("width")}var e=f.height();if(e==0){e=f.attr("height")}if(h>A.width()){A.width(h)}if(e>A.height()){A.height(e)}if(g!=""){g.css("display","none")}f.css("display","none");s.totalSlides++});if(x.startSlide>0){if(x.startSlide>=s.totalSlides){x.startSlide=s.totalSlides-1}s.currentSlide=x.startSlide}if(c(z[s.currentSlide]).is("img")){s.currentImage=c(z[s.currentSlide])}else{s.currentImage=c(z[s.currentSlide]).find("img:first")}if(c(z[s.currentSlide]).is("a")){c(z[s.currentSlide]).css("display","block")}A.css("background","url("+s.currentImage.attr("src")+") no-repeat");for(var u=0;u<x.slices;u++){var i=Math.round(A.width()/x.slices);if(u==x.slices-1){A.append(c('<div class="nivo-slice"></div>').css({left:(i*u)+"px",width:(A.width()-(i*u))+"px"}))}else{A.append(c('<div class="nivo-slice"></div>').css({left:(i*u)+"px",width:i+"px"}))}}A.append(c('<div class="nivo-caption"><p></p></div>').css({display:"none",opacity:x.captionOpacity}));if(s.currentImage.attr("title")!=""){var r=s.currentImage.attr("title");if(r.substr(0,1)=="#"){r=c(r).html()}c(".nivo-caption p",A).html(r);c(".nivo-caption",A).fadeIn(x.animSpeed)}var B=0;if(!x.manualAdvance&&z.length>1){B=setInterval(function(){b(A,z,x,false)},x.pauseTime)}if(x.directionNav){A.append('<div class="nivo-directionNav"><a class="nivo-prevNav">Prev</a><a class="nivo-nextNav">Next</a></div>');if(x.directionNavHide){c(".nivo-directionNav",A).hide();A.hover(function(){c(".nivo-directionNav",A).show()},function(){c(".nivo-directionNav",A).hide()})}c("a.nivo-prevNav",A).live("click",function(){if(s.running){return false}clearInterval(B);B="";s.currentSlide-=2;b(A,z,x,"prev")});c("a.nivo-nextNav",A).live("click",function(){if(s.running){return false}clearInterval(B);B="";b(A,z,x,"next")})}if(x.controlNav){var t=c('<div class="nivo-controlNav"></div>');A.append(t);for(var u=0;u<z.length;u++){if(x.controlNavThumbs){var y=z.eq(u);if(!y.is("img")){y=y.find("img:first")}if(x.controlNavThumbsFromRel){t.append('<a class="nivo-control" rel="'+u+'"><img src="'+y.attr("rel")+'" alt="" /></a>')}else{t.append('<a class="nivo-control" rel="'+u+'"><img src="'+y.attr("src").replace(x.controlNavThumbsSearch,x.controlNavThumbsReplace)+'" alt="" /></a>')}}else{t.append('<a class="nivo-control" rel="'+u+'">'+(u+1)+"</a>")}}c(".nivo-controlNav a:eq("+s.currentSlide+")",A).addClass("active");c(".nivo-controlNav a",A).live("click",function(){if(s.running){return false}if(c(this).hasClass("active")){return false}clearInterval(B);B="";A.css("background","url("+s.currentImage.attr("src")+") no-repeat");s.currentSlide=c(this).attr("rel")-1;b(A,z,x,"control")})}if(x.keyboardNav){c(window).keypress(function(e){if(e.keyCode=="37"){if(s.running){return false}clearInterval(B);B="";s.currentSlide-=2;b(A,z,x,"prev")}if(e.keyCode=="39"){if(s.running){return false}clearInterval(B);B="";b(A,z,x,"next")}})}if(x.pauseOnHover){A.hover(function(){s.paused=true;clearInterval(B);B=""},function(){s.paused=false;if(B==""&&!x.manualAdvance){B=setInterval(function(){b(A,z,x,false)},x.pauseTime)}})}A.bind("nivo:animFinished",function(){s.running=false;c(z).each(function(){if(c(this).is("a")){c(this).css("display","none")}});if(c(z[s.currentSlide]).is("a")){c(z[s.currentSlide]).css("display","block")}if(B==""&&!s.paused&&!x.manualAdvance){B=setInterval(function(){b(A,z,x,false)},x.pauseTime)}x.afterChange.call(this)});var b=function(e,p,n,l){var k=e.data("nivo:vars");if(k&&(k.currentSlide==k.totalSlides-1)){n.lastSlide.call(this)}if((!k||k.stop)&&!l){return false}n.beforeChange.call(this);if(!l){e.css("background","url("+k.currentImage.attr("src")+") no-repeat")}else{if(l=="prev"){e.css("background","url("+k.currentImage.attr("src")+") no-repeat")}if(l=="next"){e.css("background","url("+k.currentImage.attr("src")+") no-repeat")}}k.currentSlide++;if(k.currentSlide==k.totalSlides){k.currentSlide=0;n.slideshowEnd.call(this)}if(k.currentSlide<0){k.currentSlide=(k.totalSlides-1)}if(c(p[k.currentSlide]).is("img")){k.currentImage=c(p[k.currentSlide])}else{k.currentImage=c(p[k.currentSlide]).find("img:first")}if(n.controlNav){c(".nivo-controlNav a",e).removeClass("active");c(".nivo-controlNav a:eq("+k.currentSlide+")",e).addClass("active")}if(k.currentImage.attr("title")!=""){var j=k.currentImage.attr("title");if(j.substr(0,1)=="#"){j=c(j).html()}if(c(".nivo-caption",e).css("display")=="block"){c(".nivo-caption p",e).fadeOut(n.animSpeed,function(){c(this).html(j);c(this).fadeIn(n.animSpeed)})}else{c(".nivo-caption p",e).html(j)}c(".nivo-caption",e).fadeIn(n.animSpeed)}else{c(".nivo-caption",e).fadeOut(n.animSpeed)}var m=0;c(".nivo-slice",e).each(function(){var q=Math.round(e.width()/n.slices);c(this).css({height:"0px",opacity:"0",background:"url("+k.currentImage.attr("src")+") no-repeat -"+((q+(m*q))-q)+"px 0%"});m++});if(n.effect=="random"){var h=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade");k.randAnim=h[Math.floor(Math.random()*(h.length+1))];if(k.randAnim==undefined){k.randAnim="fade"}}if(n.effect.indexOf(",")!=-1){var h=n.effect.split(",");k.randAnim=c.trim(h[Math.floor(Math.random()*h.length)])}k.running=true;if(n.effect=="sliceDown"||n.effect=="sliceDownRight"||k.randAnim=="sliceDownRight"||n.effect=="sliceDownLeft"||k.randAnim=="sliceDownLeft"){var o=0;var m=0;var f=c(".nivo-slice",e);if(n.effect=="sliceDownLeft"||k.randAnim=="sliceDownLeft"){f=c(".nivo-slice",e)._reverse()}f.each(function(){var q=c(this);q.css("top","0px");if(m==n.slices-1){setTimeout(function(){q.animate({height:"100%",opacity:"1.0"},n.animSpeed,"",function(){e.trigger("nivo:animFinished")})},(100+o))}else{setTimeout(function(){q.animate({height:"100%",opacity:"1.0"},n.animSpeed)},(100+o))}o+=50;m++})}else{if(n.effect=="sliceUp"||n.effect=="sliceUpRight"||k.randAnim=="sliceUpRight"||n.effect=="sliceUpLeft"||k.randAnim=="sliceUpLeft"){var o=0;var m=0;var f=c(".nivo-slice",e);if(n.effect=="sliceUpLeft"||k.randAnim=="sliceUpLeft"){f=c(".nivo-slice",e)._reverse()}f.each(function(){var q=c(this);q.css("bottom","0px");if(m==n.slices-1){setTimeout(function(){q.animate({height:"100%",opacity:"1.0"},n.animSpeed,"",function(){e.trigger("nivo:animFinished")})},(100+o))}else{setTimeout(function(){q.animate({height:"100%",opacity:"1.0"},n.animSpeed)},(100+o))}o+=50;m++})}else{if(n.effect=="sliceUpDown"||n.effect=="sliceUpDownRight"||k.randAnim=="sliceUpDown"||n.effect=="sliceUpDownLeft"||k.randAnim=="sliceUpDownLeft"){var o=0;var m=0;var g=0;var f=c(".nivo-slice",e);if(n.effect=="sliceUpDownLeft"||k.randAnim=="sliceUpDownLeft"){f=c(".nivo-slice",e)._reverse()}f.each(function(){var q=c(this);if(m==0){q.css("top","0px");m++}else{q.css("bottom","0px");m=0}if(g==n.slices-1){setTimeout(function(){q.animate({height:"100%",opacity:"1.0"},n.animSpeed,"",function(){e.trigger("nivo:animFinished")})},(100+o))}else{setTimeout(function(){q.animate({height:"100%",opacity:"1.0"},n.animSpeed)},(100+o))}o+=50;g++})}else{if(n.effect=="fold"||k.randAnim=="fold"){var o=0;var m=0;c(".nivo-slice",e).each(function(){var C=c(this);var q=C.width();C.css({top:"0px",height:"100%",width:"0px"});if(m==n.slices-1){setTimeout(function(){C.animate({width:q,opacity:"1.0"},n.animSpeed,"",function(){e.trigger("nivo:animFinished")})},(100+o))}else{setTimeout(function(){C.animate({width:q,opacity:"1.0"},n.animSpeed)},(100+o))}o+=50;m++})}else{if(n.effect=="fade"||k.randAnim=="fade"){var m=0;c(".nivo-slice",e).each(function(){c(this).css("height","100%");if(m==n.slices-1){c(this).animate({opacity:"1.0"},(n.animSpeed*2),"",function(){e.trigger("nivo:animFinished")})}else{c(this).animate({opacity:"1.0"},(n.animSpeed*2))}m++})}}}}}};var w=function(e){if(this.console&&typeof console.log!="undefined"){console.log(e)}};this.stop=function(){if(!c(v).data("nivo:vars").stop){c(v).data("nivo:vars").stop=true;w("Stop Slider")}};this.start=function(){if(c(v).data("nivo:vars").stop){c(v).data("nivo:vars").stop=false;w("Start Slider")}};x.afterLoad.call(this)};c.fn.nivoSlider=function(a){return this.each(function(){var f=c(this);if(f.data("nivoslider")){return}var b=new d(this,a);f.data("nivoslider",b)})};c.fn.nivoSlider.defaults={effect:"random",slices:15,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};c.fn._reverse=[].reverse})(jQuery);
